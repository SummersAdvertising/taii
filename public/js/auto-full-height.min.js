$(window).load(function () {

 var b = $('[_height=auto]');
 
     if (b.length <= 0) 
     {
      return false;
      
     } else if ( b.length > 0 ) {
      
      var max = 0;
      var main_block;
      
      b.each(function() {
       if ( $(this).height() > max ) {
        main_block = $(this);
        max = main_block.height();
       }
      });
      
      
      b = main_block;
      
     }
     
     var c = $(this),
         $body = $('body'),
         $none = $('[none=true]'),
         autoInnerHeight = b.height(),
         autoDivHeight = b.outerHeight(true),
         autoDivBorder = autoDivHeight - autoInnerHeight,
         delBodyMargin = parseInt($body.css('marginTop')) + parseInt($body.css('marginBottom')),
         none = $none.outerHeight(true) - $none.height(),
         delHeight = 0;
     $('[_height=none]').each(function () {
         delHeight += $(this).outerHeight(true)
     });
      
 
     function fullHeight() {
         var a = c.height() - delHeight - delBodyMargin - autoDivBorder - none;

         if (a > autoInnerHeight) {          
             $('[_height=auto]').height(a);
         } else {
          $('[_height=auto]').height(autoInnerHeight);
         }
     }
     c.resize(function () {
         fullHeight();
         
     });


    fullHeight();
});